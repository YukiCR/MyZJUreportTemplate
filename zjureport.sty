%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%ZJU课程论文模板
%%作者：Percy
%%License：Creative Commons CC BY 4.0


%%最后更改于2023/06/15
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%在"UCAS课程论文模板"基础上修改而来
%%原作者：jweihe
%%GitHub：https://github.com/jweihe/UCAS_Latex_Template
%%Overleaf：https://www.overleaf.com/latex/templates/zhong-guo-ke-xue-yuan-da-xue-ke-cheng-lun-wen-mo-ban/nphpxhhqvnds

\ProvidesPackage{zjureport}

%%页边距
\RequirePackage[left=2.50cm, right=2.50cm, top=2.50cm, bottom=2.50cm]{geometry}

%%一些必要的宏包
\RequirePackage[unicode=true,colorlinks,urlcolor=blue,linkcolor=blue,bookmarksnumbered=blue]{hyperref}
\RequirePackage{latexsym,amssymb,amsmath,amsbsy,amsopn,amstext,amsthm,amsxtra,color,bm,calc,ifpdf}
\RequirePackage{graphicx}
% use enumitem for more flexibility
% \RequirePackage{enumerate}
\RequirePackage{enumitem}
\RequirePackage{fancyhdr}
\RequirePackage{listings}
\RequirePackage{multirow}
\RequirePackage{makeidx}
\RequirePackage{xcolor}
\RequirePackage{fontspec}
% \RequirePackage{subfigure}
% add to use subfloat
\RequirePackage{float}
\RequirePackage{subfig}
\PassOptionsToPackage{hyphens}{url}
\RequirePackage{hyperref}
\RequirePackage{pythonhighlight}
\RequirePackage{tcolorbox}
\RequirePackage{fontawesome}
\RequirePackage[sort&compress]{gbt7714} % for GBT7714 standard of citation

%% 更改摘要二字的样式
\renewcommand{\abstractname}{\textbf{\large {摘\quad 要}}} 

%可固定下划线长度
\makeatletter
\newcommand\dlmu[2][4cm]{\hskip1pt\underline{\hb@xt@ #1{\hss#2\hss}}\hskip3pt}
\makeatother

%更改主题
\hypersetup{
    colorlinks=true,
    linkcolor=black,
    filecolor=black,      
    urlcolor=black,
    citecolor=black,
}

%%对一些autoref的中文引用名作修改
\def\equationautorefname{式}
\def\footnoteautorefname{脚注}
\def\itemautorefname{项}
\def\figureautorefname{图}
\def\tableautorefname{表}
\def\partautorefname{篇}
\def\appendixautorefname{附录}
\def\chapterautorefname{章}
\def\sectionautorefname{节}
\def\subsectionautorefname{小小节}
\def\subsubsectionautorefname{subsubsection}
\def\paragraphautorefname{段落}
\def\subparagraphautorefname{子段落}
\def\FancyVerbLineautorefname{行}
\def\theoremautorefname{定理}

\newtheorem{Theorem}{定理}[section]
\newtheorem{Lemma}[Theorem]{引理}
\newtheorem{Corollary}[Theorem]{推论}
\newtheorem{Proposition}[Theorem]{命题}
\newtheorem{Definition}[Theorem]{定义}
\newtheorem{Example}[Theorem]{例}

%%参考文献设置
\newcommand{\reference}{
%\nocite{*}   %打开此选项会列出bib里面的所有参考文献
% \bibliographystyle{unsrt} %规定了参考文献的格式
\bibliographystyle{gbt7714-numerical}
\begin{center}%居中
	\bibliography{reference} %调出LaTeX生成参考文献列表
\end{center}
}

%%文本框设置
\newcommand{\tbox}[1]{
\begin{center}
\begin{tcolorbox}[colback=gray!10,%gray background
                  colframe=black,% black frame colour
                  width=8cm,% Use 8cm total width,
                  arc=1mm, auto outer arc,
                  boxrule=0.5pt,
                 ]
{#1}
\end{tcolorbox}
\end{center}
}

%%页眉设置
\pagestyle{fancy}
\fancyhead[L]{}%%留空则不显示
\fancyhead[C]{}%%留空则不显示
\fancyhead[RO, RE]{\footnotesize \fangsong \leftmark}%%留空则不显示


%封面页设置
{   
    \title{ \vspace{2cm} \kaishu \Huge {{XXXXXXXXXX \\ 课程报告}} \par
    \vspace{1cm} 
    % \heiti \Large {\underline{XXXXXX进展调研}}    
    \vspace{3cm} }%标题

    \author{
    \vspace{0.5cm}
    \kaishu\Large 姓名\ \dlmu[9cm]{MyName} \qquad \\ %姓名 
    \vspace{0.5cm}
    \kaishu\Large  学号\ \dlmu[9cm]{MyID} \qquad  \\ %学号
    \vspace{0.5cm}
    \kaishu\Large   院所\ \dlmu[9cm]{MyCollege} %院所
        }
        
    \date{\today} % 默认为今天的日期，可以注释掉不显示日期
}

%%在这里可更改封面logo
\newcommand{\cover}{
%%封面校名logo，图片都在figures文件夹里
% \begin{figure}
%     \subfloat[]{\includegraphics[width=0.2\textwidth]{figures/zju_logo.png}}
%     \subfloat[]{\includegraphics[width=0.6\textwidth]{figures/zju_char.png}}	
% \end{figure} 
\begin{figure}[t!]
\centering
    \subfloat{
        \includegraphics[width=0.2\linewidth]{figures/zju_logo.png}  %legend.eps does not have a caption
    }
    \subfloat{
        \includegraphics[width=0.4\linewidth]{figures/zju_char.png}    %fig1.eps has one
    }
\end{figure}
\maketitle
}

% ================ note definitioin ========================
% add note through todonotes
\RequirePackage{todonotes}
% use this to comment all notes at once
% \RequirePackage[disable]{todonotes}

% a chortcut of note
% use \reportnote{<text>} to add a note, 
% use \reportnote[<color>]{<text>} to add note with another color
\newcommand{\reportnote}[2][blue!10]{
	\todo[size = \tiny, color=#1,  bordercolor=black!50!white]{
		#2 
	}
}

% if using pdflatex, try this
% \usepackage{CJKutf8}
% \newcommand{\reportnote}[2][blue!10]{
% 	\todo[size = \scriptsize, color=#1,  bordercolor=black!50!white]{
% 		\begin{CJK*}{UTF8}{gbsn} #2 \end{CJK*}
% 	}
% }
% =============== end of note definition ==================